<button mat-button mat-dialog-close class="float-right">
    <mat-icon>clear</mat-icon>
</button>


<!-- <div *ngIf="type=='find-inactive'">
    <h1 mat-dialog-title *ngIf="deviceData?.length">Find Inactivity time </h1>
    <div mat-dialog-content *ngIf="deviceData?.length;else nodata" class="d-flex justify-content-around diagWrapper text-center">
        <form [formGroup]="findSettingForm">
            <table formArrayName="items" *ngIf="findSettingForm.get('items')['controls']?.length>0">
                <tr *ngFor="let a of findSettingForm.get('items')['controls']; let i=index;">
                    <ng-container [formGroupName]="i">
                        <td> {{i+1}}.&nbsp;&nbsp;</td>
                        <td>
                            <mat-form-field>
                                <mat-label> Find Id</mat-label>
                                <mat-select formControlName="deviceId">
                                    <mat-option [value]="a.get('deviceId').value">{{a.get('deviceId').value}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field>
                                <mat-label>Vehicle No.</mat-label>

                                <mat-select formControlName="deviceName">
                                    <mat-option [value]="a.get('deviceName').value">{{a.get('deviceName').value}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field>
                                <mat-label> Inactivity time</mat-label>
                                <input matInput type="number" formControlName="inActivityTime" matInput required>
                                <mat-error>
                                    Please provide a valid inActivity time
                                </mat-error>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-radio-group color="primary" formControlName="inactivityAlert">
                                <mat-radio-button class="example-radio-button" value="sms">SMS</mat-radio-button>
                                <mat-radio-button class="example-radio-button" value="email">Email</mat-radio-button>
                            </mat-radio-group><br>
                        </td>
                        <td>
                            <mat-icon matListIcon (click)="deleteInactivityFind(a.value)" class="cursor">delete_forever
                            </mat-icon>
                        </td>
                        <td>
                            <button type="button" mat-raised-button color="primary" [disabled]="(a.get('inactivityAlert').value == '') || a.get('inActivityTime').value == 0" (click)="onSubmitInactivityFind(a.value)">Submit</button>
                        </td>
                    </ng-container>
                </tr>
            </table>
        </form>
    </div>

</div>

<div *ngIf="type=='coin'">
    <h1 mat-dialog-title *ngIf="coinData?.length">Coin Inactivity time </h1>
    <div mat-dialog-content *ngIf="coinData?.length;else nodata" class="d-flex justify-content-around diagWrapper text-center">
        <form [formGroup]="coinSettingForm">
            <table formArrayName="items" *ngIf="coinSettingForm.get('items')['controls']?.length>0">
                <tr *ngFor="let a of coinSettingForm.get('items')['controls']; let i=index;">
                    <ng-container [formGroupName]="i">
                        <td> {{i+1}}.&nbsp;&nbsp;</td>
                        <td>
                            <mat-form-field>
                                <mat-label> Coin Id</mat-label>
                                <mat-select formControlName="coinId">
                                    <mat-option [value]="a.get('coinId').value">{{a.get('coinId').value}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field>
                                <mat-label>Coin Name</mat-label>
                                <mat-select formControlName="coinName">
                                    <mat-option [value]="a.get('coinName').value">{{a.get('coinName').value}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field>
                                <mat-label> Inactivity time</mat-label>
                                <input matInput type="number" formControlName="inActivityTime" matInput required>
                                <mat-error>
                                    Please provide a valid inActivity time
                                </mat-error>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-radio-group color="primary" formControlName="inactivityAlert" required>
                                <mat-radio-button class="example-radio-button" value="sms">SMS</mat-radio-button>
                                <mat-radio-button class="example-radio-button" value="email">Email</mat-radio-button>
                            </mat-radio-group><br>
                        </td>
                        <td>
                            <mat-icon (click)="deleteInactivityCoin(a.value)" class="cursor">delete_forever</mat-icon>
                        </td>
                        <td>
                            <button type="button" mat-raised-button color="primary" [disabled]="a.get('inactivityAlert').value == ''  || a.get('inActivityTime').value == 0" (click)="onSubmitInactivityCoin(a.value)">Submit</button>
                        </td>
                    </ng-container>
                </tr>
            </table>
        </form>
    </div>
</div> -->

<div *ngIf="type=='main-zone'">
    <h1 mat-dialog-title *ngIf="mainZone?.length">Edit Main Zone</h1>
    <div mat-dialog-content *ngIf="mainZone?.length" class="d-flex justify-content-around diagWrapper text-center">
        <form [formGroup]="mainZoneForm">
            <table formArrayName="items" *ngIf="mainZoneForm.get('items')['controls']?.length>0">
                <tr *ngFor="let a of mainZoneForm.get('items')['controls']; let i=index;">
                    <ng-container [formGroupName]="i">
                        <td> {{i+1}}.&nbsp;&nbsp;</td>
                        <td> <br>
                            <mat-form-field>
                                <mat-label>Zone Name</mat-label>
                                <input type="text" formControlName="zoneName" matInput required>
                                <mat-error *ngIf="a.get('zoneName').value ==''">
                                    ZoneName is required
                                </mat-error>
                                <mat-error *ngIf="a.get('zoneName').value !='' || general.mismatch">
                                    No special characters are allowed..
                                </mat-error>
                            </mat-form-field><br><br>
                        </td><br>
                        <td>
                            <mat-form-field *ngIf="loginData.enableZoneStandardTime">
                                <mat-label> Standard Time</mat-label>
                                <input type="number" min="0" formControlName="standardTime" matInput [required]="loginData.enableZoneStandardTime">
                                <mat-error>
                                    Please provide a valid standard time
                                </mat-error>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-icon matListIcon (click)="deleteMainZoneForm(a.value)" class="cursor">delete_forever
                            </mat-icon>
                        </td>
                        <td>
                            <button type="button" mat-raised-button color="primary" [disabled]="a.get('zoneName').value == ''" (click)="onSubmitMainZoneForm(a.value)">Submit</button>
                        </td>
                    </ng-container>
                </tr>
            </table>
        </form>
    </div>
</div>

<div *ngIf="type=='sub-zone'">
    <h1 mat-dialog-title *ngIf="zoneData?.length"> Reassign Sub Zone</h1>
    <div mat-dialog-content *ngIf="zoneData?.length" class="d-flex justify-content-around diagWrapper text-center">
        <form [formGroup]="zoneSettingForm">
            <table formArrayName="items" *ngIf="zoneSettingForm.get('items')['controls']?.length>0">
                <tr *ngFor="let a of zoneSettingForm.get('items')['controls']; let i=index;let last =last;">
                    <ng-container [formGroupName]="i">
                        <td> {{i+1}}.&nbsp;&nbsp;</td>
                        <td><br>
                            <mat-form-field style="pointer-events: none;">
                                <mat-label>Main Zone name</mat-label>
                                <input type="text" matInput formControlName="mainZoneId" required>

                            </mat-form-field> <br><br>
                        </td>

                        <td>
                            <mat-form-field>
                                <mat-label> Zone Name</mat-label>
                                <mat-select formControlName="zoneName" required multiple [compareWith]="compareFn1">
                                    <mat-option *ngFor="let zone of zoneData" [value]="zone.zoneName" [disabled]="(a.get('mainZoneId').value != zone?.mainZoneId?.zoneName) && (zone?.mainZoneId)">{{zone.zoneName}}
                                    </mat-option>
                                </mat-select>
                                <mat-error>
                                    Please provide a valid zone name
                                </mat-error>
                            </mat-form-field>
                        </td>
                        <td>
                            <button type="button" mat-raised-button color="primary" (click)="onSubmitSubZoneForm(a.value)">Submit</button>
                        </td>
                    </ng-container>
                </tr>
            </table>
        </form>
    </div>
</div>

<div *ngIf="type=='timeDelay'">
    <h1 mat-dialog-title *ngIf="deviceData?.length">Time Delay </h1>
    <div mat-dialog-content *ngIf="deviceData?.length;else nodata" class="d-flex justify-content-around diagWrapper text-center">
        <form [formGroup]="findSettingForm">
            <table formArrayName="items" *ngIf="findSettingForm.get('items')['controls']?.length>0">
                <tr *ngFor="let a of findSettingForm.get('items')['controls']; let i=index;">
                    <ng-container [formGroupName]="i">
                        <td>{{i+1}}.&nbsp;&nbsp;</td>
                        <td>
                            <mat-form-field style="pointer-events: none;">
                                <mat-label>Vehicle No.</mat-label>
                                <input matInput type="text" formControlName="deviceName">
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="pointer-events: none;">
                                <mat-label>Time delay</mat-label>
                                <input matInput type="number" formControlName="timeDelay" matInput required>
                                <mat-error>
                                    Please provide a valid time delay
                                </mat-error>
                            </mat-form-field>
                        </td>
                    </ng-container>
                </tr>
            </table>
        </form>
    </div>
</div>
<div *ngIf="type=='zone'">
    <h1 mat-dialog-title *ngIf="zoneData?.length">Edit Sub Zone</h1>
    <div mat-dialog-content *ngIf="zoneData?.length;else nodata" class="d-flex justify-content-around diagWrapper text-center">
        <form [formGroup]="zoneSettingForm">
            <table formArrayName="items" *ngIf="zoneSettingForm.get('items')['controls']?.length>0">
                <tr *ngFor="let a of zoneSettingForm.get('items')['controls']; let i=index;">
                    <ng-container [formGroupName]="i">
                        <td> {{i+1}}.&nbsp;&nbsp;</td>
                        <td> <br>
                            <mat-form-field>
                                <mat-label>Zone Name</mat-label>
                                <input type="text" formControlName="zoneName" matInput required>
                                <mat-error *ngIf="a.get('zoneName').value ==''">
                                    ZoneName is required
                                </mat-error>
                                <mat-error *ngIf="a.get('zoneName').value !='' || general.mismatch">
                                    No special characters are allowed..
                                </mat-error>
                            </mat-form-field><br><br>
                        </td><br>
                        <td>
                            <mat-icon matListIcon (click)="deleteZoneForm(a.value)" class="cursor">delete_forever
                            </mat-icon>
                        </td>
                        <td>
                            <button type="button" mat-raised-button color="primary" [disabled]="a.get('standardTime').value == 0 || a.get('zoneName').value == ''" (click)="onSubmitZoneForm(a.value)">Submit</button>
                        </td>
                    </ng-container>
                </tr>
            </table>
        </form>
    </div>
</div>

<div *ngIf="type=='coin-cat'">
    <h1 mat-dialog-title *ngIf="coinDataTemp?.length">Coin configuration</h1>
    <div mat-dialog-content *ngIf="coinDataTemp?.length;else nodata" class="d-flex justify-content-around diagWrapper text-center">
        <form [formGroup]="zoneForm">
            <table formArrayName="items" *ngIf="zoneForm.get('items')['controls']?.length>0">
                <tr *ngFor="let a of zoneForm.get('items')['controls']; let i=index;">
                    <ng-container [formGroupName]="i">
                        <td> {{i+1}}.&nbsp;&nbsp;</td>
                        <td>
                            <mat-form-field>
                                <mat-label>Coin Name</mat-label>
                                <mat-select formControlName="coinId" [compareWith]="compareFn" multiple>
                                    <mat-option *ngFor="let coin of coinData;let i= index" [disabled]="coin.zoneId!=null?coin.zoneId._id != a.get('zoneId').value:false" [value]="coin">
                                        {{coin.coinName}}</mat-option>
                                </mat-select>
                                <mat-error>
                                    Please provide a valid coin name
                                </mat-error>
                            </mat-form-field>
                        </td>
                        <td class="w-25">
                            <span *ngFor="let b of  a.get('coinName')['controls'];let i=index;let last= last;">
                            <span *ngIf="!last">
                                {{ b.get('coinName').value}},
                            </span>
                            <span *ngIf="last">
                                {{ b.get('coinName').value}}.
                            </span>
                            </span>
                        </td>
                        <td>
                            <mat-form-field>
                                <mat-label> Zone Name</mat-label>
                                <mat-select formControlName="zoneId" required>
                                    <mat-option *ngFor="let zone of zoneData" [value]="zone._id">{{zone.zoneName}}
                                    </mat-option>
                                </mat-select>
                                <mat-error>
                                    Please provide a valid zone name
                                </mat-error>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-icon matListIcon (click)="deleteCoinCategory(a.value)" class="cursor">delete_forever
                            </mat-icon>
                        </td>
                        <td>
                            <button type="button" mat-raised-button color="primary" (click)="onSumbitCoinCategory(a.value)">Submit</button>
                        </td>
                    </ng-container>
                </tr>
            </table>
        </form>
    </div>
</div>